# 产品评估指标框架 (Metrics Framework) - ClamGuard

---

### 1. 指标框架概述

*   **1.1 指标体系设计原则**
    *   **关联性**: 所有指标都必须与产品目标和用户价值直接关联。
    *   **可操作性**: 指标应能指导具体行动，帮助我们做出“做或不做”的决策。
    *   **简洁性**: 避免指标泛滥，专注于少数能反映核心健康状况的关键指标。
    *   **可衡量性**: 确保所有定义的指标都有技术上可行的、可靠的收集方法。
*   **1.2 指标分类方法**
    *   本框架将结合 **北极星指标**、**HEART 框架** 和 **业务/运营指标**，从不同维度全面评估产品健康度。
*   **1.3 指标使用指南**
    *   **北极星指标**: 用于统一团队方向，是产品长期价值的最终体现。
    *   **HEART 指标**: 用于评估和优化用户体验。
    *   **业务/运营指标**: 用于衡量产品在开源社区的影响力和采用情况。

---

### 2. 北极星指标定义

*   **2.1 北极星指标 (North Star Metric)**: **周活跃扫描 API 调用次数 (Weekly API Scan Requests)**
*   **2.2 选择理由**:
    *   该指标直接反映了产品的核心价值——**被开发者集成并持续使用**。
    *   它衡量了用户对产品核心功能的**活跃使用度**，而不是一次性的下载或安装。
    *   它的增长与用户（开发者和运维）的成功紧密相关：API调用越多，意味着有越多的应用正在通过我们的服务保障安全，运维人员也更有可能在监控服务。
*   **2.3 计算方法与数据来源**
    *   **计算方法**: 统计过去7天内，发起过至少一次 `/api/v1/scan` 调用的独立客户端IP地址的数量。
    *   **数据来源**: 服务端应用日志或数据库记录。
*   **2.4 分解指标与影响因素**
    *   **新用户激活数**: 新增的独立IP调用API的数量。
    *   **用户留存率**: 上周活跃的用户本周是否依然活跃。
    *   **调用频率**: 平均每个活跃用户每周的调用次数。

---

### 3. 指标体系详述

*   **3.1 HEART框架指标 (用于评估用户体验)**
    *   **3.1.1 Happiness (幸福度)**
        *   **指标**: GitHub Issue 中功能请求 vs. Bug 报告的比例；社区满意度调研得分。
        *   **目标**: 衡量用户对产品的主观感受，特别是开发者体验。
    *   **3.1.2 Engagement (参与度)**
        *   **指标**: **周活跃扫描 API 调用次数 (北极星指标)**；管理仪表盘的日活跃用户数 (DAU)。
        *   **目标**: 衡量用户使用产品的深度和频率。
    *   **3.1.3 Adoption (采用率)**
        *   **指标**: Docker Hub 拉取次数；GitHub Clone/Fork 数量；新用户激活数。
        *   **目标**: 衡量新用户发现并开始使用产品的比率。
    *   **3.1.4 Retention (留存率)**
        *   **指标**: 次周留存率（本周新增的用户，在下一周仍然活跃的比例）。
        *   **目标**: 衡量产品对用户的长期价值和粘性。
    *   **3.1.5 Task Success (任务成功率)**
        *   **指标**: API 调用成功率 (HTTP 200 响应比例)；平均扫描处理时间。
        *   **目标**: 衡量用户能否顺利完成核心任务。

*   **3.3 业务/运营指标 (用于衡量开源项目健康度)**
    *   **3.3.1 社区活跃度指标**: GitHub Star 数量；Issue 平均解决时长；社区贡献者数量。
    *   **3.3.2 文档质量指标**: API 文档页面平均停留时间；文档反馈 Issue 数量。

---

### 4. 功能级评估指标

*   **4.1 [功能模块1] 文件扫描 API**
    *   **使用率指标**: API 调用总次数；活跃用户数。
    *   **效果指标**: API 调用成功率；P95/P99 响应延迟；检出病毒数量。
    *   **满意度指标**: 围绕该功能的 Issue 数量和类型。
*   **4.2 [功能模块2] 扫描监控仪表盘**
    *   **使用率指标**: 仪表盘页面的日/周活跃用户数 (DAU/WAU)。
    *   **效果指标**: 用户在日志查询页面的平均会话时长；关键功能（如日期筛选）的使用率。
    *   **满意度指标**: 围绕仪表盘的易用性反馈。

---

### 5. 指标监测计划

*   **5.1 数据收集方法**
    *   **5.1.1 埋点策略**: 
        *   **后端服务**: 记录每一次 API 调用（包含时间、客户端IP、文件大小、扫描结果、处理时长）。
        *   **前端界面**: 记录管理仪表盘的页面访问和关键交互事件。
    *   **5.1.2 系统日志分析**: 通过分析应用日志来计算大部分核心指标。
    *   **5.1.3 外部平台数据**: 从 Docker Hub 获取拉取次数，从 GitHub API 获取社区相关数据。
*   **5.2 数据分析方法**
    *   构建一个简单的内部仪表盘（或使用 Grafana 等工具）来可视化核心指标。
*   **5.3 报告机制与频率**
    *   **周报**: 跟踪北极星指标和核心 HEART 指标的周度变化。
    *   **版本回顾**: 每个版本发布后，分析新功能对相关指标的影响。

---

### 6. 实验与优化框架

*   **6.1 A/B测试方法论**
    *   对于影响核心流程的重大改动（如 API 设计变更），可以考虑引入 A/B 测试，通过比较不同版本的核心指标（如成功率、响应时间）来做出决策。
*   **6.3 结果分析与决策流程**
    *   任何指标的显著异动都应触发分析，找出根本原因。
    *   产品决策（如是否开发某功能）应参考相关指标的基线和预期影响。